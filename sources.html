<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><title  id="page-title">STaTbS21D - Book of the Dead Sources</title><meta name="description" content="Synoptic Edition of Book of the Dead Spell Sources from the 21st Dynasty (STaTbS21D) is a Digital Humanities project on Egyptology, provides edited and digitalized Book of the Dead spell sources from the end of the New Kingdom and the beginning of the Third Intermediate Period (particularly the 21st Dynasty) for the Egyptological community and the general public."><link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i&amp;display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.1/baguetteBox.min.css">
<link  id="page-css" rel="stylesheet" href="assets/css/styles.min.css"><script src="assets/js/jquery-3.6.3.js?h=84e399b8f2181ccd73394fdeddff1638"></script>
<script src="assets/js/crypto-js.min.js"></script>
</head>

<body>

<nav id="nav-bar" class="navbar navbar-light navbar-expand-lg sticky-top bg-white clean-navbar" style="position: relative;overflow: visible;display: inline;">
</nav>

<main class="page sources">

<section class="clean-block clean-testimonials dark">
<div class="container">
	<div class="block-heading">
		<h2 class="text-info">Book of the Dead Sources</h2>
	</div>
	
<div class="row">
<div class="block-content">	
<div class="faq-item">
    <h4 class="question">Sources Eligibility</h4>
    <div class="answer">
        <p>The process of selection of the sources is aided by the <em>Totenbuch Projekt</em> database. For the moment, only sources on papyrus from the Theban area (like papyrus Havana) are included, whether from the 21<sup>st</sup> Dynasty (to be incorporated in the synoptic edition) or the Ramesside Period (in order to trace the spell transmission). A source with more matches in the spell list should make the final selection to include in the synoptic edition, yet less represented sources could also contain valuable information on editorial practice, a fact that will be taken into account once all the material is successfully downloaded from the database and properly catalogued.</p>
    </div>
</div>

<div style="margin-left:25%">
<table class="table" style="max-width: 60%">
 <thead>
 <tr style="height:2.25pt">
  <td width="50%" rowspan="2">
  <p><span><b><span>Source (RAM | 21D)</span></b></span><span></span></p>
  </td>
  <td width="50%" colspan="2">
  <p align="center"><span><b><span>Location</span></b></span></p>
  </td>
 </tr>
 <tr>
  <td width="25%">
  <p align="center"><span><b><span>Theban</span></b></span><b><span
  > <span
 >Area</span></span></b><b><span></span></b></p>
  </td>
  <td width="25%">
  <p align="center"><span><b><span
  >Egypt (Total)</span></b><b><span></span></b></p>
  </td>
 </tr>
</thead>
<tbody>
 <tr>
  <td>
  <p><span><span>Papyri</span></span></p>
  </td>
  <td class="table-info">
  <p align="center"><span>41</span> | <span style="background-color: #0584f9">161</span></p>
  </td>
  <td>
  <p align="center"><span>174 | 307</span></p>
  </td>
 </tr>
 <tr>
  <td>
  <p><span>Mummy
  bandages</span><span></span></p>
  </td>
  <td>
  <p align="center"><span>1 | 2</span></p>
  </td>
  <td>
  <p align="center"><span>3 | 2</span></p>
  </td>
 </tr>
 <tr>
  <td>
  <p><span>Coffins</span></p>
  </td>
  <td>
  <p align="center"><span>4 | 67</span></p>
  </td>
  <td>
  <p align="center"><span>5 | 98</span></p>
  </td>
 </tr>
 <tr>
  <td>
  <p><span>Tombs</span></p>
  </td>
  <td>
  <p align="center"><span>119 | 0</span></p>
  </td>
  <td>
  <p align="center"><span>130 | 0</span></p>
  </td>
 </tr>
 <tr>
  <td>
  <p><span><span>Other</span></span></p>
  </td>
  <td><p align="center"><span>11 | 0</span></p></td>
  <td>
  <p align="center"><span>54 | 7</span></p>
  </td>
 </tr>
 <tr>
  <td>
  <p><b><span>Total</span></b><span></span></p>
  </td>
  <td>
  <p align="center"><b><span>176 | 230</span></b></p>
  </td>
  <td>
  <p align="center"><b><span>366 | 414</span></b></p>
  </td>
 </tr>
</tbody>
</table>
</div>

	<!--div class="block-content"-->	
	<div class="faq-item"><br>
	<h4 class="question">Available Sources</h4>
	<div class="answer">
        <p>The list of sources will be populated in the following list as soon as they are incorporated to <em>GitHub</em> repository.</p>
    </div>
		<div id="fileListBody">
			   <!-- Content will be dynamically generated here --><table><div align="center"><img src="assets/img/loading.gif" /></div></table>
		</div>	
	</div></div>
</div></div>
</section>

</main>

<script>
 $(document).ready(function () {
    
			var owner = 'STaTBS21D';
			var repo = 'Book_of_the_Dead_Sources';
			var token = 'U2FsdGVkX1/o/4PlzavsXrZ3oQmKr/WA8zHuMWQwZfxTPcwWjWOrWLSxxFQ9REd10KY3i3R8T0rvI8NY1oMIbBvTmnngNWxH8hrHYlEe4VLQgssCbY5Af+DxFkwB7MkIXswSZItuoayQeKIvcKATGg=='; 
			var password = 'senerpaitui';
			var decryptedBytes = CryptoJS.AES.decrypt(token, password);
			token = decryptedBytes.toString(CryptoJS.enc.Utf8);
			
			
			 
			var apiEndpoint = 'https://api.github.com/repos/' + owner + '/' + repo + '/git/trees/main?recursive=1';
			
			var headers = {
                    'Authorization': 'Bearer ' + token,
					 'X-GitHub-Api-Version': '2022-11-28'
                };

			
			$.ajax({
			  url: apiEndpoint,
			  //dataType: 'json',
			  headers: headers,
			  success: function(response) {
				
						var folderList = {};
						var rootSpell = {};
						var ind = '';
				
						$.each(response.tree, function(index, item) {
                            if (item.type === 'blob') {
                                var path = item.path; 
								
                                if (path.includes('Unicode/')) {
                                    var rootFolder = getRootFolder(path); 
										ind = rootFolder;

                                    if (rootFolder) { 
									
										  var fileSeparator = rootFolder.indexOf(' - ');
										  var TMnumber = rootFolder.substr(0, fileSeparator);
										  TMnumber = TMnumber.substring(3);
										  var papyrus = rootFolder.substr(fileSeparator + 2);
										  papyrus = papyrus.slice(0, -3);
										  var spell = getSpellFolder(path).substring(6);
									
                                        if (!folderList[TMnumber]) {
										
                                            folderList[TMnumber] = []; 
											rootSpell[TMnumber] = [];
                                        }

										folderList[TMnumber].push(papyrus); 
										rootSpell[TMnumber].push(spell); 
                                    }
                                }
                            }
                        });
												
						var file_folder = [];
						
						// Iterate through both arrays
						$.each(folderList, function(i, fileName) {
							  var folder = rootSpell[i];

							  // Check if the file name already exists in the third array
							  var existingFile = file_folder.find(function(item) {
								return item[0] === fileName;
							  });

							  if (existingFile) {
								// If it does, add the corresponding spell folder to the nested array for that file
								existingFile.push(folder);
							  } else {
								// If it doesn't, create a new nested array for that file and add the corresponding spell folder
								file_folder.push([i + ' - ' + fileName, folder]);
							  }
							});
						
						
						// Iterate through the third array to print it in a tabular fashion with jquery
						var table = $('<table>');
						var headerRow = $('<tr>').append($('<th>').text('Book of the Dead Spell Source')).append($('<th>').text('Available Spells'));
						table.append(headerRow);
						
						
						for (var i = 0; i < file_folder.length; i++) {
						  var file = file_folder[i][0]; 
						  var folders = file_folder[i].slice(1); 
						  
						  var fileSeparator = file.indexOf(' - ');
						  var TMnumber = file.substr(0, fileSeparator);
						  var papyrus = file.substr(fileSeparator + 2);
						  var spell = folders[0]; //  REVISAR AQUÍ!!!!!!!!!!						  
						 						  
						  var row = $('<tr>').append($('<td>').html(papyrus + ' <a href="https://totenbuch.awk.nrw.de/objekt/tm' + TMnumber + '" target="_blank"><sup alt="Totenbuch Projekt reference">[TbP]</sup></a> <a href="https://trismegistos.org/text/' + TMnumber + '" target="_blank"><sup alt="Trismegistos reference">[TM]</sup></a>')).append($('<td>').html('<a class="btn btn-light" href="spells.html#sp' + spell + '">Spell ' + spell + '</a>'));
						  
						  table.append(row);
						}
			  
						$('#fileListBody').html(table);
										
			  },
			  error: function() {
				$('#fileListBody').html('<div align="center">Error fetching files from GitHub repository.</div>');
			  }
			 			  
			});


						function getRootFolder(filePath) {
							var segments = filePath.split('/');
							var index = segments.indexOf('Unicode');

							if (index !== -1 && segments.length > index + 1) {
								return segments[index + 1];
							}

							return null;
						}
						
						function getSpellFolder(filePath) {
							var segments = filePath.split('/');
							var index = segments.indexOf('Unicode');

							if (index !== -1 && segments.length > index + 1) {
								return segments[index - 1];
							}

							return null;
						}
						
						function getFileNameWithoutExtension(filePath) {
							var fileName = filePath.split('/').pop();
							return fileName.substring(0, fileName.lastIndexOf('.'));
						}
								
});
</script>
	
<footer id="footer" class="page-footer dark"></footer>

<script>
const pag = '#nsources';
$(document).ready(function () {
$('#nav-bar').load('nav.html');
$('#footer').load('footer.html');
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.11.1/baguetteBox.min.js"></script><script src="assets/js/script.min.js"></script>
</body></html>
